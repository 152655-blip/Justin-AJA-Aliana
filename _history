{"entries":[{"timestamp":1770642510534,"editorVersion":"2.0.63","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":325,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"},{"type":"added","filename":"main.blocks","value":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"}]}],"snapshots":[{"timestamp":1770642510533,"editorVersion":"2.0.63","text":{"main.ts":"namespace SpriteKind {\n    export const Decal = SpriteKind.create()\n    export const NPC = SpriteKind.create()\n}\n\n// -------------- DATA STRUCTURES -----------------------\n//creating new types and interfaces is a touch too much \n//for what I want to cover in this class. \n\n//if you are confused about any of this let me know\n\ninterface Choice {\n    id: string\n    text: string\n    nextScene?: string // used when no skill check exists\n}\n\ninterface Scene {\n    id: string\n    title: string\n    description: string\n    choices: Choice[]\n}\n\n// -------- DATA ----------\nconst characters = [\n    {\n        name: 'robotnik',\n        roborizz: 5,\n        processingPower: 4,\n        memory: 7\n    },\n    {\n        name: 'roboamore',\n        roborizz: 9,\n        processingPower: 4,\n        memory: 3\n    },\n    {\n        name: 'robotalot',\n        roborizz: 3,\n        processingPower: 8,\n        memory: 5\n    }\n]\n\nconst scenes: Scene[] = [\n    {\n        id: \"scene_1\",\n        title: \"First Contact\",\n        description: \"Love rolls by and asks if you are humming. Emotional subroutines activate.\",\n        choices: [\n            {\n                id: \"compliment\",\n                text: \"Compliment Love\",\n                nextScene: \"scene_2A\"\n            },\n            {\n                id: \"lift_table\",\n                text: \"Lift a table to impress her\",\n                nextScene: \"scene_2A\"\n            },\n            {\n                id: \"romantic_fact\",\n                text: \"Recite a romantic fact\",\n                nextScene: \"scene_2A\"\n            }\n        ]\n    },\n\n    {\n        id: \"scene_2A\",\n        title: \"Cupcake Mission\",\n        description: \"You help Love deliver cupcakes. A stack of boxes starts to fall!\",\n        choices: [\n            {\n                id: \"catch_boxes\",\n                text: \"Catch all the boxes\",\n                nextScene: \"scene_3A\"\n            },\n            {\n                id: \"calculate_trajectory\",\n                text: \"Calculate optimal catch path\",\n                nextScene: \"scene_3A\"\n            },\n            {\n                id: \"charm_joke\",\n                text: \"Charm Love with a joke\",\n                nextScene: \"bad_end\"\n            }\n        ]\n    },\n\n    {\n        id: \"scene_2B\",\n        title: \"Awkward Moment\",\n        description: \"Things feel a little weird. Love seems unsure.\",\n        choices: [\n            {\n                id: \"recover\",\n                text: \"Try to recover and keep going\",\n                nextScene: \"scene_3A\"\n            }\n        ]\n    },\n\n    {\n        id: \"scene_3A\",\n        title: \"Charging Dock Confession\",\n        description: \"The cafÃ© closes. Love stands beside you near the charging docks.\",\n        choices: [\n            {\n                id: \"ask_valentine\",\n                text: \"Ask Love to be your Valentine\",\n                nextScene: \"good_end\"\n            },\n            {\n                id: \"give_gift\",\n                text: \"Give a perfectly calculated gift\",\n                nextScene: \"bittersweet_end\"\n            },\n            {\n                id: \"carry_home\",\n                text: \"Offer to carry her home\",\n                nextScene: \"bittersweet_end\"\n            }\n        ]\n    }\n]\n\n// ---------- CHOICES HELPER FUNCTIONS -----------\n\nfunction getSceneById(id: string): Scene | undefined {\n    return scenes.find(scene => scene.id === id)\n}\n\nfunction getChoice(choiceText: string): Choice | undefined {\n    // Loop through all scenes to find the choice\n    for (let scene of scenes) {\n        // Loop through each choice in the scene\n        for (let choice of scene.choices) {\n            if (choice.text === choiceText) {\n                return choice // Return the matching choice\n            }\n        }\n    }\n    return undefined // If no matching choice is found\n}\n\nfunction handleChoices(sce: Scene) {\n    story.printText(sce.description, 80, 90)\n\n    // Show the choices to the player one by one\n    let choiceTexts: string[] = []\n    for (let choice of sce.choices) {\n        choiceTexts.push(choice.text)\n    }\n    story.showPlayerChoices(choiceTexts[0], choiceTexts[1], choiceTexts[2]) // Display the choices\n\n    // After the player picks a choice, check the result\n    story.startCutscene(function () {\n        let selectedChoice = story.getLastAnswer() // Get the last answer as a string\n\n        let choice = getChoice(selectedChoice)\n\n        console.log('attempting to handle choice: ' + choice)\n\n        if (choice) {\n            // If there is a next scene, transition to it\n            transitionToNextScene(choice.nextScene)\n        }\n    })\n}\n\nfunction transitionToNextScene(sceneId: string) {\n    console.log('attempting to transition')\n    let nextScene = getSceneById(sceneId)\n\n    if (nextScene) {\n        console.log('handling next scene: ' + nextScene)\n        handleChoices(nextScene)\n    } else {\n        // Handle ending scenes\n        console.log('handling ending scene: ' + sceneId)\n        if (sceneId === \"good_end\") {\n            story.printText(\"Synchronized systems. Love says yes.\", 80, 90)\n        } else if (sceneId === \"bad_end\") {\n            story.printText(\"Love reboots her feelings. You sweep alone.\", 80, 90)\n        } else if (sceneId === \"early_end\") {\n            story.printText(\"You lecture about appliance law for 12 minutes straight.\", 80, 90)\n        } else if (sceneId === \"bittersweet_end\") {\n            story.printText(\"The moment passes. Maybe next Valentine's Day.\", 80, 90)\n        }\n    }\n}\n\n// ---------- GAME HELPER FUNCTIONS ------------\n\nfunction initializeElements() { //setup for some of the UI changes\n    game.setDialogCursor(assets.image`a-button`)\n}\n\nfunction startStory() {\n    let firstScene = getSceneById(\"scene_1\")\n    if (firstScene) {\n        handleChoices(firstScene)\n    }\n}\n\nfunction runGame() {\n    tiles.setCurrentTilemap(tilemap`level`)\n    scene.cameraFollowSprite(playerSprite)\n    startStory()\n}\n\nfunction startGame() {\n    game.splash('Valentines Template: ', 'Your subtitle here')\n    runGame()\n}   \n\n// ----------- CONTROLLER TRIGGERS --------------\n\ncontroller.left.onEvent(ControllerButtonEvent.Pressed, function () {\n    \n})\ncontroller.right.onEvent(ControllerButtonEvent.Pressed, function () {\n    \n})\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    \n})\n\n// ------------- OVERLAP TRIGGERS ------------------\n\nsprites.onOverlap(SpriteKind.Player, SpriteKind.NPC, function (sprite, otherSprite) {\n    //\n})\n\n// ------------ Game Update Triggers --------------\n\ngame.onUpdate(function () {\n    //if we want to constantly check for certain conditions, we can do so here.\n})\n\n// ------------- GLOBAL VARIABLES ------------------\n\n//game UI props\nlet playerSprite: Sprite = null\nlet npcSprite: Sprite = null\n\nnpcSprite = sprites.create(assets.image`npc`, SpriteKind.NPC)\nnpcSprite.setPosition(90, 90)\n\n// ------------- RUNNING THE GAME ------------------\ninitializeElements()\nstartGame()\n","README.md":" ","assets.json":"","images.g.jres":"{\n    \"image1\": {\n        \"data\": \"hwQQABAAAABERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERA==\",\n        \"mimeType\": \"image/x-mkcd-f4\",\n        \"displayName\": \"npc\"\n    },\n    \"image2\": {\n        \"data\": \"hwQQABAAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZg==\",\n        \"mimeType\": \"image/x-mkcd-f4\",\n        \"displayName\": \"player\"\n    },\n    \"*\": {\n        \"mimeType\": \"image/x-mkcd-f4\",\n        \"dataEncoding\": \"base64\",\n        \"namespace\": \"myImages\"\n    }\n}","images.g.ts":"","pxt.json":"{\n    \"name\": \"Valentine's Project - Template\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-story\": \"github:microsoft/arcade-storytelling#v1.0.3\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\",\n        \"images.g.jres\",\n        \"images.g.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"v2.0.63\",\n        \"tag\": \"v2.0.63\",\n        \"commits\": \"https://github.com/microsoft/pxt-arcade/commits/5f6dbe1863a184bb2cde85fd93133e94e9719e03\",\n        \"target\": \"2.0.63\",\n        \"pxt\": \"11.3.68\"\n    },\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}}],"shares":[],"lastSaveTime":1770642510547}